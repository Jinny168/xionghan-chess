# 匈汉象棋规则设计文档

## 1. 概述

匈汉象棋是一种在13×13棋盘上进行的中国象棋变体。它保留了传统中国象棋的核心元素，同时加入了新的棋子和创新规则，增加了游戏的策略性和复杂性。

## 2. 棋盘和初始布局

### 2.1 棋盘
- 棋盘为13×13格
- 保留九宫的概念，红方九宫位于第9-11行，第5-7列；黑方九宫位于第1-3行，第5-7列
- 河界大致位于第6-7行之间

### 2.2 棋子颜色
- 红方（先手）：汉、俥、傌、相、仕、炮、兵、尉、射、檑、甲、刺、盾、巡
- 黑方（后手）：汗、車、馬、象、士、砲、卒、衛、䠶、礌、胄、刺、盾、廵

## 3. 基本棋子规则

### 3.1 将/帅 (汉/汗)
- 名称：红方为"汉"，黑方为"汗"
- 移动规则：
  - 可在九宫内自由移动
  - 可以出九宫（根据设置决定）
  - 出九宫后可能失去斜走能力（根据设置决定）
  - 保持基本的直走、横走能力
- 特殊胜利条件：将帅进入对方九宫即获胜

### 3.2 車/俥 (车)
- 移动规则：横、竖方向不限格数移动
- 吃子规则：与移动规则相同

### 3.3 馬/傌 (马)
- 移动规则：日字跳法，不能蹩马腿
- 吃子规则：与移动规则相同

### 3.4 相/象 (相)
- 移动规则：田字跳法，不能塞象眼
- 可以过河（根据设置决定）
- 特殊能力：在敌方区域时，获得横竖隔一格吃子的能力

### 3.5 士/仕 (士)
- 移动规则：九宫内斜走
- 可以出九宫（根据设置决定）
- 出九宫后可能获得直走能力（根据设置决定）

### 3.6 炮/砲 (炮)
- 移动规则：横、竖方向不限格数移动
- 吃子规则：需要炮架，隔一个棋子吃子

### 3.7 兵/卒 (兵)
- 移动规则：
  - 未过河：只能向前走一格
  - 过河后：可向前、左、右走一格
  - 底线：根据设置可能获得完整移动能力
- 特殊规则：到达对方底线时可升变为阵亡的己方棋子

## 4. 新增特色棋子规则

### 4.1 尉/衛 (尉)
- 移动规则：直线跨越移动，越过第一个遇到的棋子后，可在碰撞前的区间内移动
- 吃子规则：与移动规则相同
- 不能吃子能力（根据代码实现可能有变化）

### 4.2 射/䠶 (射)
- 移动规则：斜向移动至无碰撞点位
- 吃子规则：与移动规则相同

### 4.3 檑/礌 (檑)
- 移动规则：可沿直线或斜线无限移动，不能越过其他棋子
- 攻击规则：只能攻击"落单"的敌方棋子（周围上下左右没有同色棋子）
- 攻击范围：必须在相邻8格内

### 4.4 甲/胄 (甲)
- 移动规则：使用炮的移动方式，但仅用于移动，不能直接吃子
- 攻击规则：通过三子相连（两个己方棋子和一个敌方棋子）的方式吃子

### 4.5 刺 (刺)
- 移动规则：可直走，移动路径上必须完全无任何棋子阻挡
- 兑子规则：移动时，若移动前起始位置的反方向一格有敌棋，则与该敌棋兑子（双方都阵亡）
- 限制：不能兑盾；若与敌方盾相邻，则不能触发兑子

### 4.6 盾 (盾)
- 移动规则：同尉的直线跨越移动
- 特殊规则：不可被吃，不能吃子

### 4.7 巡/廵 (巡)
- 初始位置：分别置于河界左右两侧最边缘，即第5行和第7行的第0列和第12列
- 移动规则：仅能横向移动，不可纵向、斜向移动，也不可越子
- 移动格数：为任意偶数（2格、4格、6格等），需符合河界的限制
- 河界限制：专属活动区域，不可离开第5行和第7行
- 吃子规则：限定为自身左右紧邻的第二格，仅2个目标点（左二格、右二格）
- 吃子条件：目标格有敌方棋子，且移动路径无任何棋子阻挡

## 5. 特殊规则

### 5.1 将军与将死
- 当一方的将/帅被攻击时，称为"将军"
- 被将军方必须解除将军状态
- 若无法解除将军，则被"将死"，对方获胜

### 5.2 和棋规则
- 将帅照面：两将/帅直接相对无子阻隔
- 困毙：轮到走棋的一方无任何合法走法
- 三次重复局面：同一局面出现三次
- 不可取胜局面：双方均无可能取胜的简单局势

### 5.3 升变规则
- 兵/卒到达对方底线时，可选择升变为阵亡的己方棋子（除兵/卒外）
- 升变完成后，由对方继续走棋

### 5.4 兵复活规则
- 检查复活机制是否启用
- 复活位置：己方兵/卒的初始位置
- 复活条件：该位置为空，己方在局兵/卒数量不足上限，且有阵亡的兵/卒可供复活

## 6. 胜负判定

### 6.1 获胜条件
- 将死对方将/帅
- 将己方将/帅移动到对方九宫
- 对方认输

### 6.2 和棋条件
- 困毙
- 三次重复局面
- 不可取胜局面
- 双方同意和棋

## 7. 游戏流程

1. 红方先行
2. 每次只能移动一枚己方棋子
3. 检查移动合法性
4. 执行移动（包括吃子）
5. 检查将军状态
6. 检查游戏结束条件
7. 切换玩家
8. 重复2-7直到游戏结束

## 8. 经典模式

匈汉象棋提供经典模式选项，使用接近传统中国象棋的布局，仅包含基础棋子及射、檑两个特色棋子。