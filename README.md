# 匈汉象棋 (Hung-Han Chess)

一个基于PyGame的匈汉象棋游戏，支持双人对战和人机对战，拥有美观的界面和智能AI。


## 功能特色

- **双重游戏模式**: 双人对战或与AI对弈
- **高级AI难度**: 使用深度搜索和复杂评估函数的高级AI
- **完整规则实现**: 包括匈汉象棋特有棋子规则（尉、射、檑、甲等）
- **落子提示**: 高亮显示选中棋子所有可行的移动位置
- **移动轨迹**: 显示上一步移动的起点和终点
- **中文棋谱**: 使用传统中文棋谱记录走法（如"炮二平五"、"马8进7"等）
- **音效系统**: 移动、吃子和将军时的音效反馈
- **完整的UI**: 包括计时器、悔棋功能、全屏模式等
- **13x13棋盘**: 显示13x13的匈汉象棋棋盘和标识

## 安装与运行

### 环境要求

- Python 3.6+
- PyGame 2.0+

### 安装步骤

1. 克隆或下载此仓库
   ```
   git clone https://github.com/yourusername/chinese-chess.git
   cd chinese-chess
   ```

2. 安装必要的依赖项
   ```
   pip install pygame
   ```

3. 运行游戏
   ```
   python main.py
   ```

## 游戏玩法

### 控制方式

- **鼠标操作**: 点击棋子进行选择，点击目标位置进行移动
- **悔棋按钮**: 点击悔棋可以撤销上一步操作
- **返回按钮**: 返回到主菜单
- **全屏切换**: 点击全屏按钮或按F11/Alt+Enter切换全屏模式

### 游戏流程

1. **开始界面**: 选择游戏模式（双人对战或人机对战）
2. **阵营选择**: 如果选择人机对战，可选择执红方或黑方
3. **博弈过程**: 红方先行，双方轮流移动
4. **胜负判定**: 将军/将死、特殊规则（汉/汗进入敌方九宫）等

## 关键功能讲解

### 棋盘与棋子

- **棋盘设计**: 13×13格，带有河界
- **棋子造型**: 传统圆形象棋棋子，红黑双方
- **棋子种类**: 汉/汗(王)、仕(士)、相(象)、马、车、炮、兵(卒)、尉(衛)、射(䠶)、檑(礌)、甲(胄)

### AI系统

项目包含高级AI系统:

- **高级难度**: 使用Negamax算法、Alpha-Beta剪枝、历史启发和MVV-LVA启发的高级AI

AI使用Negamax算法搭配Alpha-Beta剪枝优化，并引入历史启发和MVV-LVA启发。评估函数考虑了:
- 棋子价值
- 棋子位置
- 对中心的控制
- 行动力与机动性
- 将帅安全
- 棋子威胁与保护关系
- 特殊棋子能力（相在敌方区域的能力、尉的跳跃能力、檑的攻击能力等）
- 棋子协调性

### 悔棋系统

- **双人模式**: 可以悔棋一步
- **人机模式**: 悔棋会撤销玩家和AI的各一步

### 走法记录

- **可视化**: 绿色高亮显示棋子移动的起点和终点，并用线连接
- **棋谱记录**: 使用标准中文棋谱记录格式，如"炮二平五"

## 代码结构

- `main.py`: 主游戏入口和界面管理
- `chess_board.py`: 棋盘渲染与交互
- `chess_pieces.py`: 棋子类定义
- `game_rules.py`: 游戏规则实现
- `game_state.py`: 游戏状态管理
- `chess_ai.py`: AI实现
- `sounds/`: 音效文件目录

## 后续规划

- [ ] 联网对战功能
- [ ] 棋谱导入导出
- [ ] 更多AI难度级别
- [ ] 棋局复盘功能
- [ ] 自定义棋盘与棋子主题

## 致谢

游戏音效来自公开资源。感谢所有为中国象棋文化传播做出贡献的爱好者。

## 许可

本项目采用MIT许可证，详情请参考LICENSE文件。